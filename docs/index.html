<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delta Tracker Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@400;500&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ─── LOGIN ─── -->
    <div id="password-modal" class="modal">
        <div class="modal-card">
            <div class="modal-eyebrow">Delta Tracker</div>
            <h2 class="modal-title">Admin</h2>
            <form id="password-form" class="modal-form">
                <label for="password-input">Passwort</label>
                <input type="password" id="password-input" placeholder="Eingeben..." required autocomplete="current-password">
                <button type="submit" class="btn btn--accent">Anmelden</button>
            </form>
            <p id="password-error" class="error hidden">Falsches Passwort.</p>
        </div>
    </div>

    <!-- ─── SETUP ─── -->
    <div id="setup-modal" class="modal hidden">
        <div class="modal-card">
            <div class="modal-eyebrow">Ersteinrichtung</div>
            <h2 class="modal-title">Zugang konfigurieren</h2>
            <form id="setup-form" class="modal-form">
                <label for="setup-password">Admin-Passwort</label>
                <input type="password" id="setup-password" placeholder="Neues Passwort" required minlength="4">

                <label for="setup-token">GitHub Token</label>
                <input type="password" id="setup-token" placeholder="ghp_..." required>
                <small><code>repo</code>-Scope erforderlich &middot; <a href="https://github.com/settings/tokens/new?scopes=repo&description=Delta+Tracker+Admin" target="_blank" rel="noopener">Token erstellen</a></small>

                <label for="setup-repo">Repository</label>
                <input type="text" id="setup-repo" placeholder="owner/repo-name" required>

                <button type="submit" class="btn btn--accent">Speichern</button>
            </form>
            <p id="setup-error" class="error hidden"></p>
        </div>
    </div>

    <!-- ─── DASHBOARD ─── -->
    <div id="admin-panel" class="hidden">

        <nav class="navbar">
            <div class="navbar-title">
                <span class="dot"></span>
                Delta Tracker
            </div>
            <button id="logout-btn" class="btn btn--ghost">Abmelden</button>
        </nav>

        <div class="shell">

            <!-- STATUS -->
            <div class="stat-row">
                <div class="stat-card">
                    <div class="stat-label">Nächster Report</div>
                    <div class="stat-value" id="next-report">&mdash;</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Letzter Lauf</div>
                    <div class="stat-value" id="last-run">&mdash;</div>
                </div>
            </div>

            <!-- CONTENT GRID -->
            <div class="content-grid">

                <!-- SCHEDULE -->
                <section class="card">
                    <h3 class="card-title">Zeitplan</h3>
                    <div class="field-pair">
                        <div class="field">
                            <label for="schedule-day">Tag</label>
                            <select id="schedule-day">
                                <option value="monday">Montag</option>
                                <option value="tuesday">Dienstag</option>
                                <option value="wednesday">Mittwoch</option>
                                <option value="thursday">Donnerstag</option>
                                <option value="friday">Freitag</option>
                                <option value="saturday">Samstag</option>
                                <option value="sunday">Sonntag</option>
                            </select>
                        </div>
                        <div class="field">
                            <label for="schedule-hour">Uhrzeit</label>
                            <select id="schedule-hour">
                                <option value="6">06:00</option>
                                <option value="7">07:00</option>
                                <option value="8">08:00</option>
                                <option value="9">09:00</option>
                                <option value="10">10:00</option>
                                <option value="11">11:00</option>
                                <option value="12">12:00</option>
                            </select>
                        </div>
                    </div>
                    <p class="muted">Automatischer Versand zum konfigurierten Zeitpunkt.</p>
                </section>

                <!-- RECIPIENTS -->
                <section class="card">
                    <h3 class="card-title">Empfänger</h3>
                    <div id="recipients-list"></div>
                    <div class="add-row">
                        <input type="email" id="new-recipient" placeholder="name@domain.ch">
                        <button id="add-recipient-btn" class="btn btn--small">+</button>
                    </div>
                </section>

            </div>

            <!-- ACTIONS -->
            <div class="action-bar">
                <button id="save-btn" class="btn btn--accent">Speichern</button>
                <button id="trigger-btn" class="btn btn--outline">Report jetzt senden</button>
            </div>
            <p id="action-status" class="status-message hidden"></p>

        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
